
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A guided introduction to array programming languages">
      
      
      
        <link rel="canonical" href="https://semperos.github.io/ArrayLangCourse/dyalog/selecting-from-arrays/">
      
      
        <link rel="prev" href="../finding-and-replacing-values/">
      
      
        <link rel="next" href="../broken-keyboard-problems/">
      
      <link rel="icon" href="../../img/favicon-32.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.3">
    
    
      
        <title>Selecting from Arrays - Array Languages Course</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6b71719e.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../style/main.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="deep-orange">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#selecting-from-arrays" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Array Languages Course" class="md-header__button md-logo" aria-label="Array Languages Course" data-md-component="logo">
      
  <img src="../../img/alc-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Array Languages Course
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Selecting from Arrays
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Array Languages Course" class="md-nav__button md-logo" aria-label="Array Languages Course" data-md-component="logo">
      
  <img src="../../img/alc-logo.png" alt="logo">

    </a>
    Array Languages Course
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        About
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_2" tabindex="0" aria-expanded="true">
          Dyalog APL
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Dyalog APL" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Dyalog APL
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../basic-syntax-and-arithmetic/" class="md-nav__link">
        Basic syntax
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dfns-and-assignment/" class="md-nav__link">
        Dfns and Assignment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../array-logic-data-driven-conditionals/" class="md-nav__link">
        Array Logic and Data-driven Conditionals
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../multidimensional-and-nested-arrays/" class="md-nav__link">
        Multidimensional and Nested Arrays
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cells-and-axes/" class="md-nav__link">
        Cells and Axes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../finding-and-replacing-values/" class="md-nav__link">
        Finding and Replacing Values
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Selecting from Arrays
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Selecting from Arrays
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#square-bracket-indexing" class="md-nav__link">
    Square bracket indexing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#squad-aka-functional-indexing" class="md-nav__link">
    Squad (A.K.A. "Functional") indexing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#take-and-drop" class="md-nav__link">
    Take and drop
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simple-indexing" class="md-nav__link">
    Simple indexing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#choose-indexing" class="md-nav__link">
    Choose indexing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reach-indexing" class="md-nav__link">
    Reach indexing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#select-from" class="md-nav__link">
    Select / From
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#so-which-type-of-indexing-do-i-use" class="md-nav__link">
    So which type of indexing do I use?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#problem-set-7" class="md-nav__link">
    Problem set 7
  </a>
  
    <nav class="md-nav" aria-label="Problem set 7">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#search-sort-slice-and-select" class="md-nav__link">
    Search, sort, slice and select
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#visit-to-the-museum" class="md-nav__link">
    Visit to the museum
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../broken-keyboard-problems/" class="md-nav__link">
        Broken Keyboard Problems
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../loops-and-recursion/" class="md-nav__link">
        Loops and Recursion
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Assignment/" class="md-nav__link">
        Extra Assignment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Workspaces/" class="md-nav__link">
        Workspace Basics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Namespaces/" class="md-nav__link">
        Namespaces and Other Objects
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Help/" class="md-nav__link">
        Getting Help
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../user-defined-functions/" class="md-nav__link">
        User-defined Functions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Operators/" class="md-nav__link">
        Operators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Quad%20names/" class="md-nav__link">
        Quad Names
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../error-handling-and-debugging/" class="md-nav__link">
        Error Handling and Debugging
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Data/" class="md-nav__link">
        Data IO
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Code/" class="md-nav__link">
        Code IO
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Interfaces/" class="md-nav__link">
        External Interfaces
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Quirks/" class="md-nav__link">
        Historical Quirks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Interpreter-internals/" class="md-nav__link">
        Interpreter Internals
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Reading/" class="md-nav__link">
        Further Reading
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" tabindex="0" aria-expanded="false">
          BQN
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="BQN" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          BQN
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bqn/basic-syntax-and-arithmetic/" class="md-nav__link">
        Basic syntax
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bqn/fns-and-assignment/" class="md-nav__link">
        Functions and Assignment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bqn/array-logic-data-driven-conditionals/" class="md-nav__link">
        Array Logic and Data-driven Conditionals
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" tabindex="0" aria-expanded="false">
          J
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="J" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          J
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../j/basic-syntax-and-arithmetic/" class="md-nav__link">
        Basic syntax
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../j/verbs-and-assignment/" class="md-nav__link">
        Verbs and Assignment
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5" tabindex="0" aria-expanded="false">
          K
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="K" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          K
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../k/basic-syntax-and-arithmetic/" class="md-nav__link">
        Basic syntax
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../k/verbs-and-assignment/" class="md-nav__link">
        Verbs and Assignment
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#square-bracket-indexing" class="md-nav__link">
    Square bracket indexing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#squad-aka-functional-indexing" class="md-nav__link">
    Squad (A.K.A. "Functional") indexing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#take-and-drop" class="md-nav__link">
    Take and drop
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simple-indexing" class="md-nav__link">
    Simple indexing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#choose-indexing" class="md-nav__link">
    Choose indexing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reach-indexing" class="md-nav__link">
    Reach indexing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#select-from" class="md-nav__link">
    Select / From
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#so-which-type-of-indexing-do-i-use" class="md-nav__link">
    So which type of indexing do I use?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#problem-set-7" class="md-nav__link">
    Problem set 7
  </a>
  
    <nav class="md-nav" aria-label="Problem set 7">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#search-sort-slice-and-select" class="md-nav__link">
    Search, sort, slice and select
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#visit-to-the-museum" class="md-nav__link">
    Visit to the museum
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="selecting-from-arrays">Selecting from Arrays</h1>
<p>In an array-oriented language, perhaps it's no surprise that there are umpteen ways to select values from arrays. There are also many ways to <a href="../finding-and-replacing-values/">modify or assign values</a> within arrays.</p>
<p>The exact terminology can vary between array languages, and even APLers use these words interchangeably sometimes. However, on this page we will say that:</p>
<ul>
<li><strong>Scalars</strong> (0-cells) are the things returned by indexing expressions</li>
<li><strong>Elements</strong> (or <strong>items</strong>) are the arrays inside of scalars. For a simple scalar <em>this is the same thing</em>! <a href="../multidimensional-and-nested-arrays/#arrays-are-made-of-scalars">Remember enclosing and diclosing scalars before?</a>.</li>
</ul>
<p>These notes summarise the different constructs available. There is also a <a href="https://dyalog.tv/Webinar/?v=AgYDvSF2FfU">Dyalog webinar dedicated to selecting from arrays</a>.</p>
<h2 id="square-bracket-indexing">Square bracket indexing</h2>
<p>This is the type of indexing we have been using so far. For vectors, it is very intuitive:</p>
<pre class="highlight"><code class="language-APL">      'LE CHAT'[6 4 1 2 3 5 6]
THE CAT</code></pre>
<p>For higher rank arrays, we can return rectangular sub-arrays by separating the indices into each axis by semicolons:</p>
<pre class="highlight"><code class="language-APL">      (2 3 4⍴⎕A)[1 2;1 3;1 4]   ⍝ The corner elements of the cuboid
AD
IL

MP
UX</code></pre>
<ol>
<li>What happens if you omit an axis? For example, <code>array[3;4 5;;]</code>?</li>
<li>What happens if you use too many or too few semicolons?</li>
</ol>
<h2 id="squad-aka-functional-indexing">Squad (A.K.A. "Functional") indexing</h2>
<p>Square-bracket indexing requires you to know the exact rank of the array and have the correct number of semicolons in your indexing expression. You might also notice that it is a special or <a href="https://aplwiki.com/wiki/APL_syntax#Syntactic_elements">anomalous syntax</a>.</p>
<p>There is also an <strong>index</strong> function <code>⍺⌷⍵</code> which has two distinctions:</p>
<ul>
<li>It is a function with the same syntax as other functions</li>
<li>It applies to any rank array by automatically filling in less-major cells (those cells defined by trailing axes)</li>
</ul>
<p><pre class="highlight"><code class="language-APL">      (1 2)(2 3)⌷(2 3 4⍴⎕A)</code></pre>
<pre class="highlight"><code>EFGH
IJKL

QRST
UVWX</code></pre></p>
<hr />
<p><pre class="highlight"><code class="language-APL">      (2 3 4⍴⎕A)[1 2;2 3;]</code></pre>
<pre class="highlight"><code>EFGH
IJKL

QRST
UVWX</code></pre></p>
<h2 id="take-and-drop">Take and drop</h2>
<p>We can chop off the edges of an array using <strong>take</strong> <code>⍺↑⍵</code> and <strong>drop</strong> <code>⍺↓⍵</code>.
<pre class="highlight"><code class="language-APL">      ¯1 3 2↑2 3 4⍴⎕A</code></pre>
<pre class="highlight"><code>MN
QR
UV</code></pre></p>
<hr />
<p><pre class="highlight"><code class="language-APL">      1 0 ¯2↓2 3 4⍴⎕A </code></pre>
<pre class="highlight"><code>MN
QR
UV</code></pre></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>While similar subarrays can be retrieved using indexing, take or drop, note that <em>take</em> and <em>drop</em> <strong>return</strong> arrays of <strong>the same rank</strong> as their argument.
<pre><code class="language-APL">      ≢⍴1 1↑2 3 4⍴⎕A 
3
      ≢⍴1 1⌷2 3 4⍴⎕A 
1</code></pre></p>
</div>
<h2 id="simple-indexing">Simple indexing</h2>
<p>The selection of rectangular sub-arrays as demonstrated above using square brackets <code>[]</code> and squad <code>⌷</code> is also known as <strong>simple indexing</strong>.</p>
<h2 id="choose-indexing">Choose indexing</h2>
<p>Simple indexing with square brackets uses scalars or vectors separated by semicolons. Index using square brackets and a nested array of numeric vectors and we can select any collection of scalars:</p>
<p><pre class="highlight"><code class="language-APL">      (2 3 4⍴⎕A)[(1 1 1)(2 1 4)(1 3 4)]</code></pre>
<pre class="highlight"><code>APL</code></pre></p>
<p>An interesting relationship appears between indices into an array and indices into its ravel when <code>⎕IO←0</code>:</p>
<p><pre class="highlight"><code class="language-APL">      ⎕IO←0
      (2 3 4⍴⎕A)[↓[0]2 3 4⊤0 15 11]</code></pre>
<pre class="highlight"><code>APL</code></pre></p>
<hr />
<p><pre class="highlight"><code class="language-APL">      ⎕A⌷⍨⊂2 3 4⊥↑[0](0 0 0)(1 0 3)(0 2 3)</code></pre>
<pre class="highlight"><code>APL</code></pre></p>
<h2 id="reach-indexing">Reach indexing</h2>
<p>Indexing into an array will retrieve some cell of an array. If it is a nested array, then selecting a scalar will return an enclosed array. Sometimes what you actually want is the item inside of that scalar.</p>
<p>While it is common and perfectly valid to simply use <em>first</em> <code>⊃⍵</code> to disclose the contents of a scalar, the <em>pick</em> function <code>⍺⊃⍵</code> can be used to retrieve the element directly:
<pre class="highlight"><code class="language-APL">      3⌷'here' 'are' 'some' 'words'   ⍝ With ]Boxing on
┌─────┐
│words│
└─────┘
      3⊃'here' 'are' 'some' 'words'
words</code></pre></p>
<p>Reach indexing allows you to pull items from deep within a nested array:
<pre class="highlight"><code class="language-APL">      (2 1)(2 2) ⊃ 2 3⍴0 1 2 (2 3⍴'AB' 'CD' 'EF' 'GH' 'IJ' 'KL') 4 5
IJ</code></pre></p>
<h2 id="select-from">Select / From</h2>
<p>Some APLers find squad-index semantics awkward, and have proposed yet another mechanism, called <strong>select</strong> or <a href="https://aplwiki.com/wiki/From"><strong>from</strong></a>. It can be defined as:
<pre class="highlight"><code class="language-APL">      I←(⊃⍤⊣⌷⊢)⍤0 99</code></pre></p>
<p>Select provides the best of both simple indexing and choose indexing, allowing you to select arbitrary collections of cells.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Select is a very general and convenient function, but it is potentially much slower than using the in-built indexing constructs. We provide it here for completeness and your interest.</p>
</div>
<h2 id="so-which-type-of-indexing-do-i-use">So which type of indexing do I use?</h2>
<p>Over time you will learn from experience what is the most appropriate thing to use in different situations. However, here is a rough guide:</p>
<table>
<thead>
<tr>
<th>Selection type</th>
<th>Selection construct</th>
</tr>
</thead>
<tbody>
<tr>
<td>Arbitrary scalars from a vector</td>
<td>Square bracket simple or <a href="../array-logic-data-driven-conditionals/#replicatecompress">compress</a></td>
</tr>
<tr>
<td>Rectangular subarrays</td>
<td>Simple</td>
</tr>
<tr>
<td>Arbitrary scalars from an array of rank ≥2</td>
<td>Choose</td>
</tr>
<tr>
<td>Nested arrays</td>
<td>Reach</td>
</tr>
<tr>
<td>Arbitrary collections of cells</td>
<td>Select</td>
</tr>
</tbody>
</table>
<h2 id="problem-set-7">Problem set 7</h2>
<h3 id="search-sort-slice-and-select">Search, sort, slice and select</h3>
<ol>
<li>
<p>Anna, Ben and Charlie are having a competition. They want to see who can eat the most fruit in a week.</p>
<pre class="highlight"><code class="language-APL">fruits ← 4 7⍴'Apples MangoesOrangesBananas'
days ← 7 3⍴'SunMonTueWedThuFriSat'
names ← 3 7⍴'Anna   Ben    Charlie'
⎕RL ← 42 1 ⋄ ate ← ?3 4 7⍴3</code></pre>
<details class="question" open="open">
<summary>What is <code>⎕RL</code>?</summary>
<p>The <dfn>roll</dfn> function <code>?⍵</code> generates random numbers for each simple scalar number in <code>⍵</code>.</p>
<p>Setting the <dfn>Random Link</dfn> <a href="../Quad%20names/#system-variables">system variable</a> <code>⎕RL</code> lets us generate the same random numbers repeatedly.</p>
</details>
<ol>
<li>Compute the names of the people who ate the most fruit on Tuesday and Sunday combined.</li>
<li>Compute the name of the person who ate the most mangoes and bananas combined.</li>
<li>What is the name of the person who ate the most fruit overall?</li>
</ol>
<details class="example">
<summary>Answer</summary>
<p>There are many different ways to find these answers. The following are just one set of solutions.</p>
<p><ol type="a">
<li></p>
<p>Anna and Charlie both ate 10 fruits total on Tuesday and Sunday combined. Ben only ate 8 fruits.</p>
<p><pre class="highlight"><code class="language-APL">      d←days⍳2 3⍴'Tue' 'Sun'
      total ← +/+/ate[;;days⍳d]
      (total=⌈/total)⌿names</code></pre>
<pre class="highlight"><code>Anna   
Charlie</code></pre></p>
<p></li>
<li></p>
<p>Charlie ate the most mangoes and bananas across the whole week.</p>
<p><pre class="highlight"><code class="language-APL">      f←fruits⍳2 7⍴'MangoesBananas'
      total ← +/+/ate[;fruits⍳f;]
      (total=⌈/total)⌿names</code></pre>
<pre class="highlight"><code>Charlie</code></pre></p>
<p></li>
<li></p>
<p>Anna ate the most fruit overall.</p>
<p><pre class="highlight"><code class="language-APL">      total ← +/+/ate
      (total=⌈/total)⌿names</code></pre>
<pre class="highlight"><code>Anna</code></pre></p>
<p>Any of these totals could have been expressed as a single sum. Either by ravelling submatrices for each person:</p>
<pre class="highlight"><code class="language-APL">total ← +/(,⍤2)ate</code></pre>
<p>Or by merging the last two axes:</p>
<pre class="highlight"><code class="language-APL">total ← +/,[2 3]ate</code></pre>
<p>A discussion comparing these expressions will be added later.</p>
<p></li>
</ol></p>
</details>
</li>
<li>
<p>Write a function <code>FindWord</code> which accepts a character matrix left argument <code>⍺</code> and a character vector right argument <code>⍵</code> and returns a Boolean vector where a <code>1</code> indicates a row in <code>⍺</code> which matches the word <code>⍵</code>.
    <pre class="highlight"><code class="language-APL">      fruits←↑'apples' 'mangoes' 'oranges' 'bananas'
      fruits FindWord 'apples'
1 0 0 0
      fruits FindWord 'oranges'
0 0 1 0</code></pre></p>
<div class="admonition question">
<p class="admonition-title">What is <code>↑</code>?</p>
<p>We created a nested vector of different length character vectors using <a href="#arrays-are-made-of-arrays">strand notation</a>. The mix function <code>↑⍵</code> is used to turn this from a nested vector of vectors into a flat matrix made of simple character scalars. In order to make the matrix rectangular, shorter vectors are padded with spaces.</p>
<pre class="highlight"><code class="language-APL">      ' '=↑'apples' 'mangoes' 'oranges' 'bananas'
0 0 0 0 0 0 1
0 0 0 0 0 0 0
0 0 0 0 0 0 0
0 0 0 0 0 0 0</code></pre>
</div>
<details class="example">
<summary>Answer</summary>
<p>There are many ways to solve this problem. A comparison of different approaches is worthy of a fuller discussion, which will be added later. For now we will simply show a few alternatives:</p>
<pre class="highlight"><code class="language-APL">FindWord ← {∧/∨/⍺∘.=⍵↑⍨2⌷⍴⍺}
FindWord ← {∨/(⍵↑⍨⊢/⍴⍺)⍷⍺}
FindWord ← {(⍵↑⍨⊢/⍴⍺)(≡⍤1)⍺}
FindWord ← {⍺∧.=⍵↑⍨2⌷⍴⍺}</code></pre>
</details>
</li>
<li>
<p>From the nested 3D array</p>
<pre class="highlight"><code class="language-APL">nest←2 3 4⍴(⍳17),(⊂2 3⍴'ab'(2 3⍴'dyalog'),'defg'),6↑⎕A</code></pre>
<p>use a single selection to obtain:</p>
<ol>
<li>The character scalar <code>'y'</code></li>
<li>The numeric scalar <code>6</code></li>
</ol>
<details class="example">
<summary>Answers</summary>
<p>It can be tricky to simplify these to a single use of pick <code>⍺⊃⍵</code>. Although understanding these selections can help with understanding complicated nested array structures, it is not very common to need to do this in real code.
<ol type="a">
<li>
<pre class="highlight"><code class="language-APL">      (2 2 2)(1 2)(1 2)⊃nest
y</code></pre>
</li>
<li>
<pre class="highlight"><code class="language-APL">      (⊂1 2 2)⊃nest
6</code></pre>
</li>
</ol></p>
</details>
</li>
<li>
<p>What type of indexing is used in the expression <code>grid[⍸grille=' ']</code> ?</p>
<details class="example">
<summary>Answer</summary>
<p>Because <code>grille</code> is a matrix, the equality with the space character is also a matrix. The <strong>where</strong> function <code>⍸⍵</code> returns a nested vector of indices, which when used with square brackets forms a <strong>choose indexing</strong> expression.</p>
</details>
</li>
<li>
<p>What indexing array can be used to select a simple scalar from itself?</p>
<details class="example">
<summary>Answer</summary>
<p>For choose indexing, an enclosed empty numeric vector:</p>
<p><pre class="highlight"><code class="language-APL">      'a'[⊂⍬]</code></pre>
<pre class="highlight"><code>a</code></pre></p>
<p>For squad indexing, an empty numeric vector:</p>
<p><pre class="highlight"><code class="language-APL">      ⍬⌷'a'</code></pre>
<pre class="highlight"><code>a</code></pre></p>
<p>For reach indexing, either:</p>
<p><pre class="highlight"><code class="language-APL">      ⍬⊃'a'</code></pre>
<pre class="highlight"><code>a</code></pre></p>
<hr />
<p><pre class="highlight"><code class="language-APL">      (⊂⍬)⊃'a'</code></pre>
<pre class="highlight"><code>a</code></pre></p>
</details>
</li>
<li>
<p>Define <code>n←5 5⍴⍳25</code> in your workspace.</p>
<p>Using selections, find at least four different ways to set the bottom-right 3 by 3 submatrix in <code>n</code> to <code>0</code>.
For example, <code>(2 2↓n)←0</code>.</p>
<details class="hint">
<summary>Hint</summary>
<p>See which primitives may be used in a <a href='http://help.dyalog.com/latest/#Language/Primitive%20Functions/Assignment%20Selective.htm?Highlight=selective%20assignment'>selective assignment</a></p>
</details>
<details class="example">
<summary>Answers</summary>
<p>Compute the indices:</p>
<pre class="highlight"><code class="language-APL">n[2+⍳3;2+⍳3]←0</code></pre>
<p>Use negative take:</p>
<pre class="highlight"><code class="language-APL">(¯3 ¯3↑n)←0</code></pre>
<p>Use two compressions:</p>
<pre class="highlight"><code class="language-APL">b←2 3/0 1
(b/b⌿n)←0</code></pre>
<p>Positive take after reversals:</p>
<pre class="highlight"><code class="language-APL">(3 3↑⌽⊖n)←0</code></pre>
</details>
</li>
</ol>
<h3 id="visit-to-the-museum">Visit to the museum</h3>
<p>Here are some data and questions about visits to a museum.  </p>
<p>The <code>section_names</code> are the names of each of the four sections in the museum.  </p>
<pre><code class="language-APL">section_names ← 'Bugs' 'Art' 'Fossils' 'Sea Life'</code></pre>

<p>The variable <code>sections</code> is a nested list of text matrices. Each matrix lists the items or creatures which belong to each section.  </p>
<pre><code class="language-APL">sections ← ↑¨('Grasshopper' 'Giant Cicada' 'Earth-boring Dung Beetle' 'Scarab Beetle' 'Miyama Stag' 'Giant Stag' 'Brown Cicada' 'Giraffe Stag' 'Horned Dynastid' 'Walking Stick' 'Walking Leaf') ('The Blue Boy by Thomas Gainsborough' ('Rooster and Hen with Hydrangeas by It',(⎕ucs 333),' Jakuch',(⎕ucs 363)) 'The Great Wave off Kanagawa by Hokusai' 'Mona Lisa by Leonardo da Vinci' 'Sunflowers by Vincent van Gogh' 'Still Life with Apples and Oranges by Paul Cézanne' 'Girl with a Pearl Earring by Johannes Vermeer' ('Shak',(⎕ucs 333),'ki dog',(⎕ucs 363),' by Unknown') 'David by Michelangelo di Lodovico Buonarroti Simoni' 'Rosetta Stone by Unknown') ('Amber' 'Ammonite' 'Diplodocus' 'Stegosaur' 'Tyrannosaurus Rex' 'Triceratops') ('Puffer Fish' 'Blue Marlin' 'Ocean Sunfish' 'Acorn Barnacle' 'Mantis Shrimp' 'Octopus' 'Pearl Oyster' 'Scallop' 'Sea Anemone' 'Sea Slug' 'Sea Star' 'Whelk' 'Horseshoe Crab')</code></pre>

<p>The <code>visits</code> table represents 1000 visits to museum sections over a two week period. The four columns represent:  </p>
<ul>
<li>The section that was visited as an index into the <code>section_names</code></li>
<li>The day of the visit in <a href="http://help.dyalog.com/latest/#Language/System%20Functions/dt.htm">Dyalog Date Number</a> format.</li>
<li>The arrival time in minutes from midnight. For example, 15:30 is 930 minutes.</li>
<li>The departure time in minutes from midnight.</li>
</ul>
<pre><code class="language-APL">⎕RL←42 ⋄ days←43589+?1000⍴28 ⋄ (arr lïv)←539+?2⍴⊂1000⍴510 ⋄ section←?1000⍴4
visits←(⊂⍋days)⌷section,days,(⊂∘⍋⌷⊢)⍤1⍉↑arr lïv</code></pre>

<p>In the boolean matrix <code>display</code>, each row corresponds to a museum piece and each column corresponds to a day. A <code>1</code> indicates days when a particular museum piece was out on display. The order of rows corresponds to the order of pieces in the <code>sections</code> table.  </p>
<pre><code>display ← 40 28⍴(9/0),1,(4/0),1,(9/0),1,(3/0),(5/1),0,(10/1),0,(5/1),0,(8/1),0,(8/1),0,(4/1),0 0 1 1 0 1 0 1 0 1 1 0 1 0,(5/1),(3/0),1 0 1 0 1 1,(4/0),1 0 1 1 0 0 1 1 0,(6/1),0 1 0 1 0 0 1 1 0 0 1 1 0 1 0 0 1 1 0,(3/1),(3/0),(4/1),0 1 1 0 1 0 0,(7/1),0 1 0 1 1 0 1 1 0 1 1 0,(3/1),0 1 1 0,(4/1),0,(3/1),0 1 0,(3/1),0 0 1 1,(5/0),1 1 0,(3/1),0 1 0 0 1 1,(3/0),(5/1),0,(9/1),0,(3/1),0 1,(3/0),(5/1),0,(3/1),0,(3/1),(3/0),1 1 0 0 1 0 1,(4/0),1 1 0 1 0 1 0 1 0,(9/1),0,(7/1),0,(3/1),0 0 1 1 0 1 1 0 0 1 0 0 1 0,(5/1),0 1,(3/0),1 1 0 1 0 0,(3/1),0,(4/1),0 0 1 1,(7/0),(3/1),(3/0),1 1,(3/0),1 1 0 1 0 1,(6/0),1 1,(4/0),1 0 1 1,(5/0),1 0 1 0 1,(6/0),(3/1),(9/0),1 1,(3/0),1 0 1 0 1 1,(13/0),1 1,(11/0),1 0 1 1,(4/0),1 0 0,(4/1),0,(12/1),0,(5/1),0 1 0 0 1 1 0,(5/1),0,(4/1),0,(4/1),0 0 1,(5/0),1 1,(3/0),(8/1),0 0 1,(3/0),1,(3/0),1,(3/0),1 0 0 1 0 1 0 1 0 1 0 1 1 0,(3/1),(4/0),(3/1),0,(3/1),0 1 1,(3/0),(4/1),0 1 1 0 1 1,(3/0),1 1 0 1 0 1 0 1,(6/0),1 1,(14/0),(8/1),(4/0),(8/1),0,(3/1),0,(4/1),(6/0),1 0 0 1 1,(3/0),1 1 0 0 1 0 1 0 0 1 0 1,(5/0),1 0 0 1 0 1 0 0 1 1,(3/0),1,(8/0),1 0 1 0,(6/1),0 0,(7/1),0 1 1 0,(3/1),0,(9/1),0,(12/1),0 1 1 0,(9/1),0,(3/1),0 0,(3/1),(3/0),(3/1),0,(3/1),(5/0),(7/1),0 1 0,(5/1),0,(3/1),0 0,(3/1),0 0 1 1 0,(4/1),0 1,(3/0),(3/1),(5/0),1 0 1 1 0 1 0,(3/1),0,(5/1),0,(3/1),0,(4/1),0 1,(4/0),1 0 1 0 0 1 1,(5/0),1,(3/0),1 0 0 1 0 1,(3/0),1 0 1 0 0 1,(4/0),1 0 0 1,(6/0),1,(14/0),1 0 0,(4/1),(3/0),(6/1),0 0 1 0,(3/1),0,(4/1),0,(3/1),0 1 0 1,(3/0),(5/1),(3/0),1 0 0 1 0,(3/1),0 1,(4/0),1 0 1 1,(11/0),1,(15/0),(3/1),(4/0),1,(15/0),(5/1),0 1 0,(8/1),0,(3/1),(4/0),(5/1),0 1,(9/0),1 0 1 1 0 0 1 0 0 1,(4/0),1 0,(4/1),0,(7/1),(3/0),1 0 0 1,(3/0),(3/1),0 1 1
</code></pre>

<ol>
<li>How many visitors arrived before 10AM?</li>
<li>What was the most popular section by visit duration?</li>
<li>Estimate the opening and closing times of each of the sections.</li>
<li>Which animal being on display corresponded with the highest increase in visit duration for its section?</li>
</ol>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/semperos/ArrayLangCourse" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://danielgregoire.dev" target="_blank" rel="noopener" title="danielgregoire.dev" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8v2m9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.71-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5Z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://fosstodon.org/@semperos" target="_blank" rel="noopener" title="fosstodon.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.5 15.5a.5.5 0 0 1-.5.5.5.5 0 0 1-.5-.5v-7c0-1.93-2.07-3.5-4-3.5H6a4 4 0 0 0-4 4v10h4v-4h5v4h4v-4.5a.5.5 0 0 1 .5-.5.5.5 0 0 1 .5.5V16a3 3 0 0 0 3 3 3 3 0 0 0 3-3v-2h-2.5v1.5Z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant"], "search": "../../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.ba449ae6.min.js"></script>
      
        <script src="../../javascripts/config.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>